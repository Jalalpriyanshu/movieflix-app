{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{searchMovies}from\"../api/omdb\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SearchBar(){const[query,setQuery]=useState(\"\");const[results,setResults]=useState([]);const[showResults,setShowResults]=useState(false);const[loading,setLoading]=useState(false);const navigate=useNavigate();// Debounced search - search as user types\nuseEffect(()=>{const timeoutId=setTimeout(()=>{if(query.trim().length>2){performSearch();}else{setResults([]);setShowResults(false);}},300);// 300ms delay\nreturn()=>clearTimeout(timeoutId);},[query]);const performSearch=async()=>{setLoading(true);try{const data=await searchMovies(query);if(data.Response===\"True\"){setResults(data.Search.slice(0,5));// Limit to 5 results for faster display\nsetShowResults(true);}else{setResults([]);setShowResults(true);}}catch(error){console.error(\"Search error:\",error);setResults([]);setShowResults(true);}finally{setLoading(false);}};const handleSearch=async e=>{e.preventDefault();if(!query.trim())return;performSearch();};const handleMovieClick=movieId=>{navigate(`/movie/${movieId}`);setShowResults(false);setQuery(\"\");};const handleInputFocus=()=>{if(results.length>0){setShowResults(true);}};const handleInputBlur=()=>{// Delay hiding results to allow clicking\nsetTimeout(()=>setShowResults(false),200);};return/*#__PURE__*/_jsxs(\"div\",{style:{position:\"relative\"},children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,style:{display:\"flex\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search for Movies, Events, Plays, Sports and Activities\",value:query,onChange:e=>setQuery(e.target.value),onFocus:handleInputFocus,onBlur:handleInputBlur,style:{padding:\"0.7rem 1rem\",borderRadius:\"4px 0 0 4px\",border:\"1px solid #ccc\",width:\"350px\",fontSize:\"0.9rem\"}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,style:{background:\"#e71a38\",color:\"#fff\",border:\"none\",borderRadius:\"0 4px 4px 0\",padding:\"0.7rem 1.5rem\",fontWeight:\"bold\",cursor:loading?\"not-allowed\":\"pointer\",opacity:loading?0.7:1},children:loading?\"...\":\"Search\"})]}),showResults&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:\"100%\",left:0,right:0,background:\"#fff\",border:\"1px solid #ddd\",borderRadius:\"4px\",boxShadow:\"0 4px 12px rgba(0,0,0,0.15)\",zIndex:1000,maxHeight:\"300px\",overflowY:\"auto\"},children:loading?/*#__PURE__*/_jsx(\"div\",{style:{padding:\"1rem\",textAlign:\"center\",color:\"#666\"},children:\"Searching...\"}):results.length>0?results.map(movie=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleMovieClick(movie.imdbID),style:{padding:\"0.8rem 1rem\",borderBottom:\"1px solid #eee\",cursor:\"pointer\",color:\"#333\",display:\"flex\",alignItems:\"center\",gap:\"1rem\"},onMouseEnter:e=>e.target.style.backgroundColor=\"#f5f5f5\",onMouseLeave:e=>e.target.style.backgroundColor=\"transparent\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.Poster!==\"N/A\"?movie.Poster:\"https://via.placeholder.com/40x60/666/fff?text=No+Image\",alt:movie.Title,style:{width:\"40px\",height:\"60px\",objectFit:\"cover\",borderRadius:\"4px\"}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:\"bold\"},children:movie.Title}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"0.8rem\",color:\"#666\"},children:movie.Year})]})]},movie.imdbID)):/*#__PURE__*/_jsx(\"div\",{style:{padding:\"1rem\",textAlign:\"center\",color:\"#666\"},children:\"No movies found\"})})]});}export default SearchBar;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","searchMovies","jsx","_jsx","jsxs","_jsxs","SearchBar","query","setQuery","results","setResults","showResults","setShowResults","loading","setLoading","navigate","timeoutId","setTimeout","trim","length","performSearch","clearTimeout","data","Response","Search","slice","error","console","handleSearch","e","preventDefault","handleMovieClick","movieId","handleInputFocus","handleInputBlur","style","position","children","onSubmit","display","alignItems","type","placeholder","value","onChange","target","onFocus","onBlur","padding","borderRadius","border","width","fontSize","disabled","background","color","fontWeight","cursor","opacity","top","left","right","boxShadow","zIndex","maxHeight","overflowY","textAlign","map","movie","onClick","imdbID","borderBottom","gap","onMouseEnter","backgroundColor","onMouseLeave","src","Poster","alt","Title","height","objectFit","Year"],"sources":["E:/Nexus/movie app/src/components/SearchBar.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { searchMovies } from \"../api/omdb\";\r\n\r\nfunction SearchBar() {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [results, setResults] = useState([]);\r\n  const [showResults, setShowResults] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  // Debounced search - search as user types\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      if (query.trim().length > 2) {\r\n        performSearch();\r\n      } else {\r\n        setResults([]);\r\n        setShowResults(false);\r\n      }\r\n    }, 300); // 300ms delay\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [query]);\r\n\r\n  const performSearch = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const data = await searchMovies(query);\r\n      if (data.Response === \"True\") {\r\n        setResults(data.Search.slice(0, 5)); // Limit to 5 results for faster display\r\n        setShowResults(true);\r\n      } else {\r\n        setResults([]);\r\n        setShowResults(true);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Search error:\", error);\r\n      setResults([]);\r\n      setShowResults(true);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSearch = async (e) => {\r\n    e.preventDefault();\r\n    if (!query.trim()) return;\r\n    performSearch();\r\n  };\r\n\r\n  const handleMovieClick = (movieId) => {\r\n    navigate(`/movie/${movieId}`);\r\n    setShowResults(false);\r\n    setQuery(\"\");\r\n  };\r\n\r\n  const handleInputFocus = () => {\r\n    if (results.length > 0) {\r\n      setShowResults(true);\r\n    }\r\n  };\r\n\r\n  const handleInputBlur = () => {\r\n    // Delay hiding results to allow clicking\r\n    setTimeout(() => setShowResults(false), 200);\r\n  };\r\n\r\n  return (\r\n    <div style={{position: \"relative\"}}>\r\n      <form onSubmit={handleSearch} style={{\r\n        display: \"flex\",\r\n        alignItems: \"center\"\r\n      }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search for Movies, Events, Plays, Sports and Activities\"\r\n          value={query}\r\n          onChange={(e) => setQuery(e.target.value)}\r\n          onFocus={handleInputFocus}\r\n          onBlur={handleInputBlur}\r\n          style={{\r\n            padding: \"0.7rem 1rem\",\r\n            borderRadius: \"4px 0 0 4px\",\r\n            border: \"1px solid #ccc\",\r\n            width: \"350px\",\r\n            fontSize: \"0.9rem\"\r\n          }}\r\n        />\r\n        <button type=\"submit\" disabled={loading} style={{\r\n          background: \"#e71a38\",\r\n          color: \"#fff\",\r\n          border: \"none\",\r\n          borderRadius: \"0 4px 4px 0\",\r\n          padding: \"0.7rem 1.5rem\",\r\n          fontWeight: \"bold\",\r\n          cursor: loading ? \"not-allowed\" : \"pointer\",\r\n          opacity: loading ? 0.7 : 1\r\n        }}>\r\n          {loading ? \"...\" : \"Search\"}\r\n        </button>\r\n      </form>\r\n      \r\n      {showResults && (\r\n        <div style={{\r\n          position: \"absolute\",\r\n          top: \"100%\",\r\n          left: 0,\r\n          right: 0,\r\n          background: \"#fff\",\r\n          border: \"1px solid #ddd\",\r\n          borderRadius: \"4px\",\r\n          boxShadow: \"0 4px 12px rgba(0,0,0,0.15)\",\r\n          zIndex: 1000,\r\n          maxHeight: \"300px\",\r\n          overflowY: \"auto\"\r\n        }}>\r\n          {loading ? (\r\n            <div style={{\r\n              padding: \"1rem\",\r\n              textAlign: \"center\",\r\n              color: \"#666\"\r\n            }}>\r\n              Searching...\r\n            </div>\r\n          ) : results.length > 0 ? (\r\n            results.map((movie) => (\r\n              <div \r\n                key={movie.imdbID} \r\n                onClick={() => handleMovieClick(movie.imdbID)}\r\n                style={{\r\n                  padding: \"0.8rem 1rem\",\r\n                  borderBottom: \"1px solid #eee\",\r\n                  cursor: \"pointer\",\r\n                  color: \"#333\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  gap: \"1rem\"\r\n                }}\r\n                onMouseEnter={(e) => e.target.style.backgroundColor = \"#f5f5f5\"}\r\n                onMouseLeave={(e) => e.target.style.backgroundColor = \"transparent\"}\r\n              >\r\n                <img \r\n                  src={movie.Poster !== \"N/A\" ? movie.Poster : \"https://via.placeholder.com/40x60/666/fff?text=No+Image\"}\r\n                  alt={movie.Title}\r\n                  style={{\r\n                    width: \"40px\",\r\n                    height: \"60px\",\r\n                    objectFit: \"cover\",\r\n                    borderRadius: \"4px\"\r\n                  }}\r\n                />\r\n                <div>\r\n                  <div style={{fontWeight: \"bold\"}}>{movie.Title}</div>\r\n                  <div style={{fontSize: \"0.8rem\", color: \"#666\"}}>{movie.Year}</div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div style={{\r\n              padding: \"1rem\",\r\n              textAlign: \"center\",\r\n              color: \"#666\"\r\n            }}>\r\n              No movies found\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchBar;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,YAAY,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3C,QAAS,CAAAC,SAASA,CAAA,CAAG,CACnB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACa,WAAW,CAAEC,cAAc,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAAiB,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAE9B;AACAD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiB,SAAS,CAAGC,UAAU,CAAC,IAAM,CACjC,GAAIV,KAAK,CAACW,IAAI,CAAC,CAAC,CAACC,MAAM,CAAG,CAAC,CAAE,CAC3BC,aAAa,CAAC,CAAC,CACjB,CAAC,IAAM,CACLV,UAAU,CAAC,EAAE,CAAC,CACdE,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAAE,GAAG,CAAC,CAAE;AAET,MAAO,IAAMS,YAAY,CAACL,SAAS,CAAC,CACtC,CAAC,CAAE,CAACT,KAAK,CAAC,CAAC,CAEX,KAAM,CAAAa,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChCN,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAQ,IAAI,CAAG,KAAM,CAAArB,YAAY,CAACM,KAAK,CAAC,CACtC,GAAIe,IAAI,CAACC,QAAQ,GAAK,MAAM,CAAE,CAC5Bb,UAAU,CAACY,IAAI,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAAE;AACrCb,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,IAAM,CACLF,UAAU,CAAC,EAAE,CAAC,CACdE,cAAc,CAAC,IAAI,CAAC,CACtB,CACF,CAAE,MAAOc,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACrChB,UAAU,CAAC,EAAE,CAAC,CACdE,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,OAAS,CACRE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAc,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CAACvB,KAAK,CAACW,IAAI,CAAC,CAAC,CAAE,OACnBE,aAAa,CAAC,CAAC,CACjB,CAAC,CAED,KAAM,CAAAW,gBAAgB,CAAIC,OAAO,EAAK,CACpCjB,QAAQ,CAAC,UAAUiB,OAAO,EAAE,CAAC,CAC7BpB,cAAc,CAAC,KAAK,CAAC,CACrBJ,QAAQ,CAAC,EAAE,CAAC,CACd,CAAC,CAED,KAAM,CAAAyB,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,GAAIxB,OAAO,CAACU,MAAM,CAAG,CAAC,CAAE,CACtBP,cAAc,CAAC,IAAI,CAAC,CACtB,CACF,CAAC,CAED,KAAM,CAAAsB,eAAe,CAAGA,CAAA,GAAM,CAC5B;AACAjB,UAAU,CAAC,IAAML,cAAc,CAAC,KAAK,CAAC,CAAE,GAAG,CAAC,CAC9C,CAAC,CAED,mBACEP,KAAA,QAAK8B,KAAK,CAAE,CAACC,QAAQ,CAAE,UAAU,CAAE,CAAAC,QAAA,eACjChC,KAAA,SAAMiC,QAAQ,CAAEV,YAAa,CAACO,KAAK,CAAE,CACnCI,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,QACd,CAAE,CAAAH,QAAA,eACAlC,IAAA,UACEsC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,yDAAyD,CACrEC,KAAK,CAAEpC,KAAM,CACbqC,QAAQ,CAAGf,CAAC,EAAKrB,QAAQ,CAACqB,CAAC,CAACgB,MAAM,CAACF,KAAK,CAAE,CAC1CG,OAAO,CAAEb,gBAAiB,CAC1Bc,MAAM,CAAEb,eAAgB,CACxBC,KAAK,CAAE,CACLa,OAAO,CAAE,aAAa,CACtBC,YAAY,CAAE,aAAa,CAC3BC,MAAM,CAAE,gBAAgB,CACxBC,KAAK,CAAE,OAAO,CACdC,QAAQ,CAAE,QACZ,CAAE,CACH,CAAC,cACFjD,IAAA,WAAQsC,IAAI,CAAC,QAAQ,CAACY,QAAQ,CAAExC,OAAQ,CAACsB,KAAK,CAAE,CAC9CmB,UAAU,CAAE,SAAS,CACrBC,KAAK,CAAE,MAAM,CACbL,MAAM,CAAE,MAAM,CACdD,YAAY,CAAE,aAAa,CAC3BD,OAAO,CAAE,eAAe,CACxBQ,UAAU,CAAE,MAAM,CAClBC,MAAM,CAAE5C,OAAO,CAAG,aAAa,CAAG,SAAS,CAC3C6C,OAAO,CAAE7C,OAAO,CAAG,GAAG,CAAG,CAC3B,CAAE,CAAAwB,QAAA,CACCxB,OAAO,CAAG,KAAK,CAAG,QAAQ,CACrB,CAAC,EACL,CAAC,CAENF,WAAW,eACVR,IAAA,QAAKgC,KAAK,CAAE,CACVC,QAAQ,CAAE,UAAU,CACpBuB,GAAG,CAAE,MAAM,CACXC,IAAI,CAAE,CAAC,CACPC,KAAK,CAAE,CAAC,CACRP,UAAU,CAAE,MAAM,CAClBJ,MAAM,CAAE,gBAAgB,CACxBD,YAAY,CAAE,KAAK,CACnBa,SAAS,CAAE,6BAA6B,CACxCC,MAAM,CAAE,IAAI,CACZC,SAAS,CAAE,OAAO,CAClBC,SAAS,CAAE,MACb,CAAE,CAAA5B,QAAA,CACCxB,OAAO,cACNV,IAAA,QAAKgC,KAAK,CAAE,CACVa,OAAO,CAAE,MAAM,CACfkB,SAAS,CAAE,QAAQ,CACnBX,KAAK,CAAE,MACT,CAAE,CAAAlB,QAAA,CAAC,cAEH,CAAK,CAAC,CACJ5B,OAAO,CAACU,MAAM,CAAG,CAAC,CACpBV,OAAO,CAAC0D,GAAG,CAAEC,KAAK,eAChB/D,KAAA,QAEEgE,OAAO,CAAEA,CAAA,GAAMtC,gBAAgB,CAACqC,KAAK,CAACE,MAAM,CAAE,CAC9CnC,KAAK,CAAE,CACLa,OAAO,CAAE,aAAa,CACtBuB,YAAY,CAAE,gBAAgB,CAC9Bd,MAAM,CAAE,SAAS,CACjBF,KAAK,CAAE,MAAM,CACbhB,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,QAAQ,CACpBgC,GAAG,CAAE,MACP,CAAE,CACFC,YAAY,CAAG5C,CAAC,EAAKA,CAAC,CAACgB,MAAM,CAACV,KAAK,CAACuC,eAAe,CAAG,SAAU,CAChEC,YAAY,CAAG9C,CAAC,EAAKA,CAAC,CAACgB,MAAM,CAACV,KAAK,CAACuC,eAAe,CAAG,aAAc,CAAArC,QAAA,eAEpElC,IAAA,QACEyE,GAAG,CAAER,KAAK,CAACS,MAAM,GAAK,KAAK,CAAGT,KAAK,CAACS,MAAM,CAAG,yDAA0D,CACvGC,GAAG,CAAEV,KAAK,CAACW,KAAM,CACjB5C,KAAK,CAAE,CACLgB,KAAK,CAAE,MAAM,CACb6B,MAAM,CAAE,MAAM,CACdC,SAAS,CAAE,OAAO,CAClBhC,YAAY,CAAE,KAChB,CAAE,CACH,CAAC,cACF5C,KAAA,QAAAgC,QAAA,eACElC,IAAA,QAAKgC,KAAK,CAAE,CAACqB,UAAU,CAAE,MAAM,CAAE,CAAAnB,QAAA,CAAE+B,KAAK,CAACW,KAAK,CAAM,CAAC,cACrD5E,IAAA,QAAKgC,KAAK,CAAE,CAACiB,QAAQ,CAAE,QAAQ,CAAEG,KAAK,CAAE,MAAM,CAAE,CAAAlB,QAAA,CAAE+B,KAAK,CAACc,IAAI,CAAM,CAAC,EAChE,CAAC,GA3BDd,KAAK,CAACE,MA4BR,CACN,CAAC,cAEFnE,IAAA,QAAKgC,KAAK,CAAE,CACVa,OAAO,CAAE,MAAM,CACfkB,SAAS,CAAE,QAAQ,CACnBX,KAAK,CAAE,MACT,CAAE,CAAAlB,QAAA,CAAC,iBAEH,CAAK,CACN,CACE,CACN,EACE,CAAC,CAEV,CAEA,cAAe,CAAA/B,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}